{
  "title": "Revenues and expenses",
  "type": "jig.default",
  "datasources": {
    "expenses": {
      "options": {
        "data": [
          {
            "x": "2019",
            "y": 22000
          },
          {
            "x": "2020",
            "y": 19000
          },
          {
            "x": "2021",
            "y": 28000
          },
          {
            "x": "2022",
            "y": 39000
          }
        ]
      },
      "type": "datasource.static"
    },
    "revenues": {
      "options": {
        "data": [
          {
            "x": "2019",
            "y": 45000
          },
          {
            "x": "2020",
            "y": 38000
          },
          {
            "x": "2021",
            "y": 46000
          },
          {
            "x": "2022",
            "y": 51000
          }
        ]
      },
      "type": "datasource.static"
    },
    "transactions": {
      "options": {
        "provider": "DATA_PROVIDER_DYNAMIC",
        "entities": [
          {
            "entity": "default/revenues"
          }
        ],
        "query": "SELECT \n  id, \n  '$.year', \n  '$.date',\n  '$.company',\n  '$.description',\n  '$.amount',\n  '$.positive'\nFROM [default/revenues]\nWHERE '$.year' LIKE @filter or @filter IS NULL\nORDER BY '$.date' DESC\n",
        "queryParameters": {
          "filter": "=@ctx.components.transactions-list.state.filter"
        }
      },
      "type": "datasource.sqlite"
    }
  },
  "children": [
    {
      "options": {
        "chart": {
          "height": 280,
          "isAnimated": true
        },
        "legend": {
          "isHidden": false
        },
        "plotOptions": {
          "series": {
            "pointWidth": 12
          }
        },
        "series": [
          {
            "color": "positive",
            "data": "=@ctx.datasources.revenues",
            "dataLabels": [
              {
                "isEnabled": false
              }
            ],
            "name": "Revenues"
          },
          {
            "color": "negative",
            "data": "=@ctx.datasources.expenses",
            "dataLabels": [
              {
                "isEnabled": false
              }
            ],
            "name": "Expenses"
          }
        ],
        "xAxis": {
          "categories": ["2019", "2020", "2021", "2022"],
          "tickAmount": 3
        },
        "yAxis": {
          "labels": {
            "format": {
              "compactDisplay": "short",
              "currency": "USD",
              "notation": "compact",
              "numberStyle": "currency"
            }
          },
          "max": 65000,
          "min": 10000
        }
      },
      "type": "component.bar-chart"
    },
    {
      "instanceId": "transactions-list",
      "options": {
        "data": "=@ctx.datasources.transactions",
        "filter": [
          {
            "title": "2019",
            "value": 2019
          },
          {
            "title": "2020",
            "value": 2020
          },
          {
            "title": "2021",
            "value": 2021
          },
          {
            "title": "2022",
            "value": 2022
          }
        ],
        "item": {
          "options": {
            "title": "=@ctx.current.item.company",
            "subtitle": "=@ctx.current.item.description",
            "description": "=$fromMillis($toMillis(@ctx.current.item.date), '[M01]/[D01]/[Y01]')",
            "divider": "solid",
            "label": {
              "color": [
                {
                  "color": "color2",
                  "when": "=(@ctx.current.item.positive = \"true\")"
                },
                {
                  "color": "color4",
                  "when": "=(@ctx.current.item.positive = \"false\")"
                }
              ],
              "isHidden": false,
              "title": "=@ctx.current.item.amount & '$'"
            },
            "leftElement": {
              "element": "icon",
              "name": "=@ctx.current.item.positive = \"true\" ? 'up' :'down'"
            },
            "style": {
              "isError": "=@ctx.current.item.positive = \"false\" ? \"true\" :\"false\"",
              "isPositive": "=@ctx.current.item.positive"
            }
          },
          "type": "component.list-item"
        },
        "maximumItemsToRender": 10
      },
      "type": "component.list"
    }
  ],
  "header": {
    "options": {
      "source": {
        "uri": "https://images.unsplash.com/photo-1628348068343-c6a848d2b6dd?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NXx8Z3JhcGhzfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=900&q=60"
      }
    },
    "type": "component.image"
  }
}
